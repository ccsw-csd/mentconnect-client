<div class="container">

    <div id="title">
        <h4>Cuestionarios</h4>
    </div>

    <p-table [value]="questionnaires" [lazy]="true" (onLazyLoad)="loadPage($event)" responsiveLayout="scroll" dataKey="id"
    [paginator]="true" [rows]="10" [totalRecords]="totalRecords" [loading]="loading" 
    [globalFilterFields]="['description','questionsNumber', 'patientsNumber', 'user.name', 'createDate', 'lastEditDate']">
    <ng-template pTemplate="header">
        <tr>
            <th style="width: 3rem"></th>
            <th pSortableColumn="description">Descripción<p-sortIcon field="description"></p-sortIcon></th>
            <th pSortableColumn="questionsNumber">Nº preguntas<p-sortIcon field="questionsNumber"></p-sortIcon></th>
            <th pSortableColumn="patientsNumber">Nº pacientes<p-sortIcon field="patientsNumber"></p-sortIcon></th>
            <th pSortableColumn="user.name">Usuario<p-sortIcon field="user.name"></p-sortIcon></th>
            <th pSortableColumn="createDate">F.creación<p-sortIcon field="createDate"></p-sortIcon></th>
            <th pSortableColumn="lastEditDate">U.edición<p-sortIcon field="lastEditDate"></p-sortIcon></th>
            <th>Acciones</th>
        </tr>
        <tr>
            <th style="width: 3rem">              
            </th>
            <th>
                <p-columnFilter type="text" field="description"></p-columnFilter>
            </th>
            <th>
                <p-columnFilter type="text" field="questionsNumber"></p-columnFilter>
            </th>
            <th>
                <p-columnFilter type="text" field="patientsNumber"></p-columnFilter>
            </th>
            <th>
                <p-columnFilter field="user" matchMode="in" [showMenu]="false">
                    <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                        <p-multiSelect [ngModel]="value" appendTo="body" [options]="users" placeholder="Usuario" (onChange)="filter($event.value)" optionLabel="name">
                            <ng-template let-user pTemplate="item">
                                <div class="p-multiselect-representative-option">                                  
                                    <span class="ml-1">{{user.name}}</span>
                                </div>
                            </ng-template>
                        </p-multiSelect>
                    </ng-template>
                </p-columnFilter>
            </th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-questionnaire>
        <tr>
            <td style="width: 3rem"></td>
            <td>{{questionnaire.description}}</td>
            <td>{{questionnaire.questionsNumber}}</td>
            <td>{{questionnaire.patientsNumber}}</td>
            <td>{{questionnaire.user.name}}</td>
            <td>{{questionnaire.createDate | date:'dd/MM/yyy'}}</td>
            <td>{{questionnaire.lastEditDate | date:'dd/MM/yyy'}}</td>
            <td>
                <button pButton pRipple type="button" icon="pi pi-pencil" class="p-button-rounded p-button-text p-button-plain icon"></button>
                <button pButton pRipple type="button" icon="pi pi-trash" class="p-button-rounded p-button-text p-button-plain icon"></button>
            </td>
        </tr>
    </ng-template>
</p-table>


</div>
